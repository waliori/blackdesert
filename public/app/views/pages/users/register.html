<div class="page-header">
  <h1>Registration page</h1>
</div>

<div id="login-page" class="row">
    <div class="col s12 z-depth-6 card-panel title ng-scope">
      <form class="register-form" name="regForm" ng-submit="register.regUser(regData,regForm.$valid)" novalidate>

        <div class="row margin">
          <div class="input-field col s12" ng-class="{'has-success': (regForm.username.$valid && !regForm.username.$pristine && !register.usernameInvalid) ,'has-error':(!regForm.username.$valid && !regForm.username.$pristine) || (!regForm.username.$valid && regForm.$submitted) || register.usernameInvalid}">
            <i class="mdi-social-person-outline prefix"></i>
            <label for="username" class="center-align"></label>
            <input ng-disable="register.disabled" id="username" name="username" type="text" class="input-lg form-control m-b-5 ng-touched" placeholder="Choose a username" ng-model="register.regData.username" ng-minlength="3" ng-maxlength="20" ng-pattern="/^[a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38}$/" required ng-blur="register.checkUsername(regData)">

            <small class="help-block" ng-show="(!regForm.username.$pristine && regForm.username.$error.required) || (regForm.$submitted && regForm.username.$error.required)">This field is required</small>
            <span ng-show="register.checkingUsername" class="ng-hide"><i class="fa fa-spinner fa-spin"></i></span>
            <small class="help-block" ng-show="register.usernameMsg && !regForm.username.$error.required && regForm.username.$valid">{{ register.usernameMsg }}</small>
            <small><ul class="help-block" ng-show="(!regForm.username.$pristine && regForm.username.$error.pattern)|| (!regForm.username.$pristine && regForm.username.$error.minlength) || (!regForm.$pristine && regForm.username.$error.maxlength)">
              <li>must contain between 3 and 20 characters</li>
              <li>Must not contain any special characters ( only "-" is allowed)</li>
            </ul></small>
          </div>
        </div>


        <div class="row margin">
          <div class="input-field col s12" ng-class="{'has-success': (regForm.email.$valid && !regForm.email.$pristine && !register.emailInvalid) ,'has-error':(!regForm.email.$valid && !regForm.email.$pristine) || (!regForm.email.$valid && regForm.$submitted) || register.emailInvalid}">
            <i class="mdi-communication-email prefix"></i>
            <label for="email" class="center-align" ></label>
            <input ng-disable="register.disabled" id="email" name="email" type="email" class="input-lg form-control m-b-5 ng-touched" placeholder="Type your email address" ng-model="register.regData.email" ng-pattern='/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/' ng-minlength="5" ng-maxlength="30" required ng-blur="register.checkEmail(regData)" autocomplete="email">
            <small class="help-block" ng-show="(!regForm.email.$pristine && regForm.email.$error.required) || (regForm.$submitted && regForm.email.$error.required)">This field is required</small>
            <span ng-show="register.checkingEmail" class="ng-hide"><i class="fa fa-spinner fa-spin"></i></span>
            <small class="help-block" ng-show="register.emailMsg && !regForm.email.$error.required && regForm.username.$valid">{{ register.emailMsg }}</small>
            <small class="help-block" ng-show="(!regForm.email.$pristine && regForm.email.$error.pattern) || (!regForm.email.$pristine && regForm.email.$error.minlength) || (!regForm.$pristine && regForm.email.$error.maxlength)">Enter a valid email address (e.g: waliori@gmail.com)</small>
          </div>
        </div>


        <div class="row margin">
          <div class="input-field col s12" ng-class="{'has-success': (regForm.firstPassword.$valid && !regForm.firstPassword.$pristine) ,'has-error':(!regForm.firstPassword.$valid && !regForm.firstPassword.$pristine) || (!regForm.firstPassword.$valid && regForm.$submitted)}">
            <i class="mdi-action-lock-outline prefix"></i>
            <label for="firstPassword"></label>

            <input ng-disable="register.disabled"  id="password" type="password" name="firstPassword" class="input-lg form-control m-b-5 ng-touched" placeholder="Your password" ng-model="firstPassword" ng-pattern="/^(?=.*[A-Za-z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,35}$/" ng-minlength="8" ng-maxlength="35" required autocomplete="new-password">

            <small class="help-block" ng-show="(!regForm.firstPassword.$pristine && regForm.firstPassword.$error.required) || (regForm.$submitted && regForm.firstPassword.$error.required)">This field is required</small>

            <small><ul class="help-block" ng-show="(!regForm.firstPassword.$pristine && regForm.firstPassword.$error.pattern)|| (!regForm.firstPassword.$pristine && regForm.firstPassword.$error.minlength) || (!regForm.firstPassword.$pristine && regForm.firstPassword.$error.maxlength)">
              <li>Must contain between 8 and 35 characters</li>
              <li>Must contain at least one uper case letter, one lower case letter, one special character and one number</li>
            </ul></small>
          </div>
        </div>



        <div class="row margin">
          <div class="input-field col s12" ng-class="{'has-success': confirmed && !regForm.confirm_password.$error.required ,'has-error': (!confirmed && !regForm.confirm_password.$error.required) || (regForm.confirm_password.$error.required && !regForm.confirm_password.$pristine) || (regForm.confirm_password.$error.required && regForm.$submitted)}">
            <i class="mdi-action-lock-outline prefix"></i>
            <label for="confirm_password" ></label>


            <input ng-disable="register.disabled"  id="confirm_password" name="confirm_password" type="password" class="input-lg form-control m-b-5 ng-touched"  placeholder="Confirm your password" ng-model="confirm" required match="{{[firstPassword]}}" ng-change="register.regData.password = confirm" autocomplete="new-password">


            <small class="help-block" ng-show="(!regForm.confirm_password.$pristine && regForm.confirm_password.$error.required) || (regForm.$submitted && regForm.confirm_password.$error.required)">
              This field is required
            </small>

            <small ng-show="(!confirmed && !regForm.confirm_password.$pristine && regForm.firstPassword.$valid)" class="help-block">
              Passwords do not match
            </small>
          </div>
        </div>
        <div class="row margin">
          <div class="input-field col s12 options">
            <input ng-click="register.agree('ok')" ng-disabled="register.disabled" value="ok" ng-model="agreeC" name="agreeC" type="radio" id="st" ng-checked="true">
            <label for="st">I agree to the <a href="/gcu" target="_blank" style="color:currentColor;font-weight: bold">"general conditions of use"</a> and the <a href="/privacy" target="_blank" style="color:currentColor;font-weight: bold">"privacy policy"</a> of Bdoteach.me</label>
          </div>
        </div>
        <div class="row margin">
          <div class="input-field col s12">
          	<label for="submit" ></label>
            <button ng-disable="register.disabled" id="submit" type="submit" class="form-control" style="white-space:normal !important;word-wrap:break-word;height:auto" ><span ng-hide="register.loading" class="ng-scope">Register</span><span ng-show="register.loading" class="ng-hide"><i class="fa fa-spinner fa-spin"></i></span></button>
          </div>
        </div>
      </form>
    </div>

  </div>
  <br><br>
  <div class="row" style="padding: 0 30px 10px;">
    <div class="show-hide-message" ng-show="register.success_msg">
        <div class="text-info ng-binding">{{ register.success_msg }}</div>
      </div>
      <div class="show-hide-message" ng-show="register.err_msg">
        <div class="text-danger ng-binding"><pre>{{ register.err_msg }}</pre></div>
      </div>

  </div>
    